<!DOCTYPE html>
<html>
<head>
    <link rel="stylesheet" href="bower_components/jointjs/dist/joint.css" />
    <script src="bower_components/jquery-2.0.3/jquery.js"></script>
    <script src="bower_components/lodash/lodash.js"></script>
    <script src="bower_components/backbone/backbone.js"></script>
    <script src="bower_components/jointjs/dist/joint.js"></script>
</head>
<body>
  <div id="graph1" style="margin:100px auto; width:800px; border:1px solid"></div>
  <script type="text/javascript">

    var graph = new joint.dia.Graph;

    var paper = new joint.dia.Paper({
        el: $('#graph1'),
        width: 800,
        height: 200,
        model: graph,
        gridSize: 1
    });

    var a0 = new joint.shapes.basic.Rect({
        position: { x: 50, y: 50 },
        size: { width: 50, height: 30 },
        attrs: { rect: { fill: 'white', line: 'red' },
                 text: { text: 'A', fill: 'black' } }
    });

    var a1 = a0.clone();
    a1.translate(100);
    a0.embed(a1)

    var a2 = a0.clone();
    a2.translate(200);
    a0.embed(a2)

    var a3 = a0.clone();
    a3.translate(300);
    a0.embed(a3)

    var a4 = a0.clone();
    a4.translate(400);
    a0.embed(a4)

    var a5 = a0.clone();
    a5.translate(500);
    a0.embed(a5)

    var b0 = new joint.shapes.basic.Rect({
        position: { x: 140, y: 150 },
        size: { width: 50, height: 30 },
        attrs: { rect: { fill: 'white', line: 'red' },
                 text: { text: 'B', fill: 'black' } }
    });

    var b1 = b0.clone();
    b1.translate(100*2/3);
    b0.embed(b1)

    var b2 = b0.clone();
    b2.translate(200*2/3);
    b0.embed(b2)

    var b3 = b0.clone();
    b3.translate(300*2/3);
    b0.embed(b3)

    var b4 = b0.clone();
    b4.translate(400*2/3);
    b0.embed(b4)

    var b5 = b0.clone();
    b5.translate(500*2/3);
    b0.embed(b5)

    var b6 = b0.clone();
    b6.translate(600*2/3);
    b0.embed(b6)

    var b7 = b0.clone();
    b7.translate(700*2/3);
    b0.embed(b7)

    var b8 = b0.clone();
    b8.translate(800*2/3);
    b0.embed(b8)

    // Token counts are: A produces 3, B consumes 2
    // So firing counts are: A fires 2 times, B fires 3 times
    // No initial tokens
    
    var l10 = new joint.dia.Link({source: { id: a0.id }, target: { id: b0.id }});
    var l11 = new joint.dia.Link({source: { id: a0.id }, target: { id: b0.id }});
    var l12 = new joint.dia.Link({source: { id: a0.id }, target: { id: b1.id }});
    var l13 = new joint.dia.Link({source: { id: a1.id }, target: { id: b1.id }});
    var l14 = new joint.dia.Link({source: { id: a1.id }, target: { id: b2.id }});
    var l15 = new joint.dia.Link({source: { id: a1.id }, target: { id: b2.id }});

    var l20 = new joint.dia.Link({source: { id: a2.id }, target: { id: b3.id }});
    var l21 = new joint.dia.Link({source: { id: a2.id }, target: { id: b3.id }});
    var l22 = new joint.dia.Link({source: { id: a2.id }, target: { id: b4.id }});
    var l23 = new joint.dia.Link({source: { id: a3.id }, target: { id: b4.id }});
    var l24 = new joint.dia.Link({source: { id: a3.id }, target: { id: b5.id }});
    var l25 = new joint.dia.Link({source: { id: a3.id }, target: { id: b5.id }});

    var l30 = new joint.dia.Link({source: { id: a4.id }, target: { id: b6.id }});
    var l31 = new joint.dia.Link({source: { id: a4.id }, target: { id: b6.id }});
    var l32 = new joint.dia.Link({source: { id: a4.id }, target: { id: b7.id }});
    var l33 = new joint.dia.Link({source: { id: a5.id }, target: { id: b7.id }});
    var l34 = new joint.dia.Link({source: { id: a5.id }, target: { id: b8.id }});
    var l35 = new joint.dia.Link({source: { id: a5.id }, target: { id: b8.id }});

    graph.addCells([a0, a1, a2, a3, a4, a5,
                    b0, b1, b2, b3, b4, b5, b6, b7, b8,
                    l10, l11, l12, l13, l14, l15,
                    l20, l21, l22, l23, l24, l25,
                    l30, l31, l32, l33, l34, l35,
                   ]);

  </script>

  <div id="graph2" style="margin:100px auto; width:800px; border:1px solid"></div>
  <script type="text/javascript">

    var graph = new joint.dia.Graph;

    var paper = new joint.dia.Paper({
        el: $('#graph2'),
        width: 800,
        height: 200,
        model: graph,
        gridSize: 1
    });

    var a0 = new joint.shapes.basic.Rect({
        position: { x: 50, y: 50 },
        size: { width: 50, height: 30 },
        attrs: { rect: { fill: 'white', line: 'red' },
                 text: { text: 'A', fill: 'black' } }
    });

    var a1 = a0.clone();
    a1.translate(100);
    a0.embed(a1)

    var a2 = a0.clone();
    a2.translate(200);
    a0.embed(a2)

    var a3 = a0.clone();
    a3.translate(300);
    a0.embed(a3)

    var a4 = a0.clone();
    a4.translate(400);
    a0.embed(a4)

    var a5 = a0.clone();
    a5.translate(500);
    a0.embed(a5)

    var b0 = new joint.shapes.basic.Rect({
        position: { x: 100, y: 150 },
        size: { width: 50, height: 30 },
        attrs: { rect: { fill: 'white', line: 'red' },
                 text: { text: 'B', fill: 'black' } }
    });

    var b1 = b0.clone();
    b1.translate(100*2/3);
    b0.embed(b1)

    var b2 = b0.clone();
    b2.translate(200*2/3);
    b0.embed(b2)

    var b3 = b0.clone();
    b3.translate(300*2/3);
    b0.embed(b3)

    var b4 = b0.clone();
    b4.translate(400*2/3);
    b0.embed(b4)

    var b5 = b0.clone();
    b5.translate(500*2/3);
    b0.embed(b5)

    var b6 = b0.clone();
    b6.translate(600*2/3);
    b0.embed(b6)

    var b7 = b0.clone();
    b7.translate(700*2/3);
    b0.embed(b7)

    var b8 = b0.clone();
    b8.translate(800*2/3);
    b0.embed(b8)

    // Token counts are: A produces 3, B consumes 2
    // So firing counts are: A fires 2 times, B fires 3 times
    // One initial token
    
    var l10 = new joint.dia.Link({source: { id: a0.id }, target: { id: b0.id }});
    var l11 = new joint.dia.Link({source: { id: a0.id }, target: { id: b1.id }});
    var l12 = new joint.dia.Link({source: { id: a0.id }, target: { id: b1.id }});
    var l13 = new joint.dia.Link({source: { id: a1.id }, target: { id: b2.id }});
    var l14 = new joint.dia.Link({source: { id: a1.id }, target: { id: b2.id }});
    var l15 = new joint.dia.Link({source: { id: a1.id }, target: { id: b3.id }});

    var l20 = new joint.dia.Link({source: { id: a2.id }, target: { id: b3.id }});
    var l21 = new joint.dia.Link({source: { id: a2.id }, target: { id: b4.id }});
    var l22 = new joint.dia.Link({source: { id: a2.id }, target: { id: b4.id }});
    var l23 = new joint.dia.Link({source: { id: a3.id }, target: { id: b5.id }});
    var l24 = new joint.dia.Link({source: { id: a3.id }, target: { id: b5.id }});
    var l25 = new joint.dia.Link({source: { id: a3.id }, target: { id: b6.id }});

    var l30 = new joint.dia.Link({source: { id: a4.id }, target: { id: b6.id }});
    var l31 = new joint.dia.Link({source: { id: a4.id }, target: { id: b7.id }});
    var l32 = new joint.dia.Link({source: { id: a4.id }, target: { id: b7.id }});
    var l33 = new joint.dia.Link({source: { id: a5.id }, target: { id: b8.id }});
    var l34 = new joint.dia.Link({source: { id: a5.id }, target: { id: b8.id }});
    // var l35 = new joint.dia.Link({source: { id: a5.id }, target: { id: b8.id }});

    graph.addCells([a0, a1, a2, a3, a4, a5,
                    b0, b1, b2, b3, b4, b5, b6, b7, b8,
                    l10, l11, l12, l13, l14, l15,
                    l20, l21, l22, l23, l24, l25,
                    l30, l31, l32, l33, l34, // l35,
                   ]);

  </script>
</body>
</html>
